<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Contact Book Plus</title>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/custom.css">
        <link href="fontawesome/css/all.css" rel="stylesheet">
    </head>
    <body onload="fetchContacts()">
        <h2>Contact-Form</h2>

            <div class="table">
                <div class="d-flex align-items-center" id="table"><table>
                            <tbody><tr onclick="editContact(1039)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/defaultAvatar.png" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Siphesihle</h5></td>
                                <td><h5></h5></td>
                            </tr>
                            
                            <tr onclick="editContact(1040)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/62c5e13c8a3bd.png" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Siphesihle</h5></td>
                                <td><h5>sinare</h5></td>
                            </tr>
                            
                            <tr onclick="editContact(1041)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/62c5e160eb940.png" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Siphesihle</h5></td>
                                <td><h5></h5></td>
                            </tr>
                            
                            <tr onclick="editContact(1044)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/62caa1ba9a718.jpg" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Khethiwe </h5></td>
                                <td><h5>Matsheni</h5></td>
                            </tr>
                            
                            <tr onclick="editContact(1045)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/62c5dfa4a5d63.png" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Spooky</h5></td>
                                <td><h5></h5></td>
                            </tr>
                            
                            <tr onclick="editContact(1046)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/62c5e0b1f3007.png" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Spooky2</h5></td>
                                <td><h5></h5></td>
                            </tr>
                            
                            <tr onclick="editContact(1047)">
                                <td><img src="https://mysite.itvarsity.org/api/ContactBook/controller/uploads/62caa5f976c6c.jpg" style="width:150px" width="75px" alt="Paris"></td>
                                <td><h5>Sibusiso</h5></td>
                                <td><h5>Sekwane</h5></td>
                            </tr>
                            </tbody></table></div>
                    <button id="refresh" type="button">Refresh</button>
                    <button id="addContact" type="button">Add Contact</button>
            </div>
    
            <script src="config.js"></script>
            <script>
    
    
                document.getElementById("refresh").addEventListener('click',fetchContacts);
                document.getElementById("addContact").addEventListener('click',addContact);
    
    
                
                function fetchContacts()
                {
                    fetch(rootPath + "controller/get-contacts/")
                    .then(function(response){
                        return response.json();
                    })
    
                    .then(function(data){
                        displayOutput(data);
                        console.log(data);
                    })
                }
    
                function displayOutput(data){
                    output="<table>";
                        for(a in data)
                        {
                            output+=`
                            <tr onclick="editContact(${data[a].id})">
                                <td><img src="${rootPath}controller/uploads/${data[a].avatar}" style="width:150px" width="75px" src="paris.jpg" alt="Paris" /></td>
                                <td><h5>${data[a].firstname}</h5></td>
                                <td><h5>${data[a].lastname}</h5></td>
                            </tr>
                            `;
                        }
    
                        output+="</table>";
                        document.getElementById("table").innerHTML=output;
                }
    
                function addContact()
                {
                    window.open("add-contact.html","_self");
                }
    
                function editContact(id)
                {
                    window.open("edit-contact.html?="+id,"_self");
                }
            </script>
        
    </body>
</html>